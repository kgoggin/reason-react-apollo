<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Working With Queries · Reason GraphQL Tools</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; The following assumes you have configured your project to use codegen as descrived in [Configuring Codegen](/docs/setting-up-codegen);"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Working With Queries · Reason GraphQL Tools"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/"/><meta property="og:description" content="&gt; The following assumes you have configured your project to use codegen as descrived in [Configuring Codegen](/docs/setting-up-codegen);"/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Reason GraphQL Tools</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Getting Started</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/setting-up-codegen">Setting Up Your Project for Codegen</a></li><li class="navListItem"><a class="navItem" href="/docs/setting-up-apollo">Creating an Apollo Client</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/working-with-the-types">Using the Generated Types for Your Schema</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/using-queries">Working With Queries</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Working With Queries</h1></header><article><div><span><blockquote>
<p>The following assumes you have configured your project to use codegen as descrived in <a href="/docs/setting-up-codegen">Configuring Codegen</a>;</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="generated-query-modules"></a><a href="#generated-query-modules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generated Query Modules</h2>
<p>Let's assume you've defined a query that looks like this:</p>
<pre><code class="hljs css language-graphql"><span class="token keyword">query</span> MyCoolQuery<span class="token punctuation">(</span><span class="token variable">$filter</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  todos<span class="token punctuation">(</span><span class="token attr-name">filter</span><span class="token punctuation">:</span> <span class="token variable">$filter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    title
    isComplete
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Once you've run the codegen, you'll now be able to access this query at <code>Apollo.Queries.MyCoolQuery</code>. This generated module will have a definition that looks like this:</p>
<pre><code class="hljs css language-reason"><span class="token keyword">module</span> <span class="token constructor variable">MyCoolQuery</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span> variables <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span> <span class="token string">"filter"</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> parse <span class="token operator">=</span> variables <span class="token operator">=></span> <span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Json</span><span class="token punctuation">.</span>t<span class="token punctuation">;</span>
  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token class-name">ReasonReactApollo</span><span class="token punctuation">.</span><span class="token class-name">ApolloTypes</span><span class="token punctuation">.</span>documentNode<span class="token punctuation">;</span>
  <span class="token keyword">let</span> useQuery<span class="token punctuation">:</span>
    <span class="token punctuation">(</span><span class="token operator">~</span>query<span class="token punctuation">:</span> documentNode<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>displayName<span class="token punctuation">:</span> string<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>skip<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span> <span class="token string">"filter"</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>fetchPolicy<span class="token punctuation">:</span> watchQueryFetchPolicy<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>errorPolicy<span class="token punctuation">:</span> errorPolicy<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>pollInterval<span class="token punctuation">:</span> int<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>client<span class="token punctuation">:</span> apolloClient<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>notifyOnNetworkStatusChange<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>context<span class="token punctuation">:</span> context<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>partialRefetch<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>returnPartialData<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>ssr<span class="token punctuation">:</span>
    bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>onCompleted<span class="token punctuation">:</span> <span class="token class-name">Query</span><span class="token punctuation">.</span>t <span class="token operator">=></span> unit<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>onError<span class="token punctuation">:</span> apolloError <span class="token operator">=></span> unit<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token operator">=></span> queryResult<span class="token punctuation">(</span><span class="token operator">'</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> useLazyQuery<span class="token punctuation">:</span>
    <span class="token punctuation">(</span><span class="token operator">~</span>query<span class="token punctuation">:</span> documentNode<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>displayName<span class="token punctuation">:</span> string<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span> <span class="token string">"filter"</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>fetchPolicy<span class="token punctuation">:</span> watchQueryFetchPolicy<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>errorPolicy<span class="token punctuation">:</span> errorPolicy<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>pollInterval<span class="token punctuation">:</span> int<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>client<span class="token punctuation">:</span> apolloClient<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>notifyOnNetworkStatusChange<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>context<span class="token punctuation">:</span> context<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>partialRefetch<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>returnPartialData<span class="token punctuation">:</span> bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>ssr<span class="token punctuation">:</span>
    bool<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">~</span>onCompleted<span class="token punctuation">:</span> <span class="token class-name">Query</span><span class="token punctuation">.</span>t <span class="token operator">=></span> unit<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token operator">~</span>onError<span class="token punctuation">:</span> apolloError <span class="token operator">=></span> unit<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">~</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span> <span class="token string">"filter"</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token operator">=></span> unit<span class="token punctuation">,</span>
    queryResult<span class="token punctuation">(</span><span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Json</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> makeVariables<span class="token punctuation">:</span>
    <span class="token punctuation">(</span><span class="token operator">~</span>filter<span class="token punctuation">:</span> string<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">.</span> <span class="token string">"filter"</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="type-variables"></a><a href="#type-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type variables</code></h3>
<p>This is the type for the variables defined in the operation, expressed as a <code>Js.t</code></p>
<h3><a class="anchor" aria-hidden="true" id="parse"></a><a href="#parse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>parse</code></h3>
<p>This is a function that takes <code>variables</code> and transforms it into JSON (which, behind the scenes, is an identity function).</p>
<h3><a class="anchor" aria-hidden="true" id="query"></a><a href="#query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>query</code></h3>
<p>The query variable is the result of running the operation definition through the <code>gql</code> tag. It's compiled down to a plain JS object that's ready to be passed directly to Apollo with no further runtime work! In most cases you won't need to access this, but it can be handy if you want to work directly with the query.</p>
<h3><a class="anchor" aria-hidden="true" id="usequery"></a><a href="#usequery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>useQuery</code></h3>
<p>This function is a ReasonML binding for Apollo's useQuery hook, and accepts all of the same configuration options (though some have been tweaked to make them more Reason-friendly). Note that since we've already pre-processed the query doecument, you don't need to directly pass it as an argument as you would in the JS version.</p>
<h3><a class="anchor" aria-hidden="true" id="uselazyquery"></a><a href="#uselazyquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>useLazyQuery</code></h3>
<p>This function is a ReasonML binding for Apollo's useLazyQuery hook, and accepts all of the same configuration options (though some have been tweaked to make them more Reason-friendly.) Note that since we've already pre-processed the query doecument, you don't need to directly pass it as an argument as you would in the JS version.</p>
<h3><a class="anchor" aria-hidden="true" id="makevariables"></a><a href="#makevariables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>makeVariables</code></h3>
<p>This is a helper function for generating the variables required for the query. By using this you're able to tap into Reason's functional programming advantages like partial application.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/working-with-the-types"><span class="arrow-prev">← </span><span>Using the Generated Types for Your Schema</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#generated-query-modules">Generated Query Modules</a><ul class="toc-headings"><li><a href="#type-variables"><code>type variables</code></a></li><li><a href="#parse"><code>parse</code></a></li><li><a href="#query"><code>query</code></a></li><li><a href="#usequery"><code>useQuery</code></a></li><li><a href="#uselazyquery"><code>useLazyQuery</code></a></li><li><a href="#makevariables"><code>makeVariables</code></a></li></ul></li></ul></nav></div></div></body></html>